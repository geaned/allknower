version: '3.7'
services:
  embedder:
    build:
      context: ./CLIP-for-embedding-generation
    ports:
      - "8766:8766"
    volumes:
      - /storage/uvd174/.cache/huggingface/hub/models--openai--clip-vit-base-patch32/:/app/.cache/huggingface/hub/models--openai--clip-vit-base-patch32/
    deploy:
      resources:
        reservations:
          devices:
            - driver: nvidia
              device_ids: ['4']
              capabilities: [gpu]
